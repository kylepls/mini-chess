occupancy        &  filemask         =  potential blockers (pb)
. . 1 1 . . 1 .     . . . 1 . . . .     . . . 1 . . . .
1 . 1 1 . 1 1 1     . . . 1 . . . .     . . . 1 . . . .
. 1 . . . 1 . .     . . . 1 . . . .     . . . . . . . .
. . . . . . . .     . . . 1 . . . .     . . . . . . . .
1 . . . . . . .  &  . . . 1 . . . .  =  . . . . . . . .
. 1 1 . . . 1 .     . . . 1 . . . .     . . . . . . . .
. . . 1 1 1 1 1     . . . 1 . . . .     . . . 1 . . . .
. . . 1 . . 1 .     . . . 1 . . . .     . . . 1 . . . .

blockers         -  2*piece bitboard =  difference (d)
. . . 1 . . . .     . . . . . . . .     . . . 1 . . . .
. . . 1 . . . .     . . . . . . . .     1 1 1 . . . . .
. . . . . . . .     . . . . . . . .     1 1 1 1 1 1 1 1
. . . . . . . .     . . . . . . . .     1 1 1 1 1 1 1 1
. . . . . . . .  -  . . . . . . . .  =  1 1 1 1 1 1 1 1
. . . . . . . .     . . . . . . . .     1 1 1 1 1 1 1 1
. . . 1 . . . .     . . . . 1 . . .     . . . 1 1 1 1 1
. . . 1 . . . .     . . . . . . . .     . . . 1 . . . .

difference       ^  occupancy        =  changed (c)
. . . 1 . . . .     . . 1 1 . . 1 .     . . 1 . . . 1 .
1 1 1 . . . . .     1 . 1 1 . 1 1 1     . 1 . 1 . 1 1 1
1 1 1 1 1 1 1 1     . 1 . . . 1 . .     1 . 1 1 1 . 1 1
1 1 1 1 1 1 1 1     . . . . . . . .     1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1  ^  1 . . . . . . .  =  . 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1     . 1 1 . . . 1 .     1 . . 1 1 1 . 1
. . . 1 1 1 1 1     . . . 1 1 1 1 1     . . . . . . . .
. . . 1 . . . .     . . . 1 . . 1 .     . . . . . . 1 .

changed          &  filemask         =  result (r)
. . 1 . . . 1 .     . . . 1 . . . .     . . . . . . . .
. 1 . 1 . 1 1 1     . . . 1 . . . .     . . . 1 . . . .
1 . 1 1 1 . 1 1     . . . 1 . . . .     . . . 1 . . . .
1 1 1 1 1 1 1 1     . . . 1 . . . .     . . . 1 . . . .
. 1 1 1 1 1 1 1  &  . . . 1 . . . .  =  . . . 1 . . . .
1 . . 1 1 1 . 1     . . . 1 . . . .     . . . 1 . . . .
. . . . . . . .     . . . 1 . . . .     . . . . . . . .
. . . . . . 1 .     . . . 1 . . . .     . . . . . . . .

result = (occupancy ^ ((occupancy & filemask) - 2*pieceBB)) & filemask


